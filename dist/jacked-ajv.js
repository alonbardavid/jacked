Object.defineProperty(exports,"__esModule",{value:true});exports.validator=validator;var _ajv=require('ajv');var _ajv2=_interopRequireDefault(_ajv);var _lodash=require('lodash');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var ajv=new _ajv2.default({allErrors:true});function transformError(error){if(error.keyword=="required"){return{path:error.params.missingProperty,message:error.message};}return{message:error.message,path:error.dataPath.substr(1)};}function schemaToSample(schema){switch(schema.type){case"object":return(0,_lodash.mapValues)(schema.properties,function(val){return schemaToSample(val);});case"array":if(schema.items&&schema.items.length>0){return schema.items.map(function(i){return schemaToSample(i);});}return[];default:return schema.type;}}function validator(schema){var validate=ajv.compile(schema);var structure=schemaToSample(schema);;function doValidation(value){var valid=validate(value);return valid?[]:validate.errors.map(transformError);}doValidation.getStructure=function(){return structure;};return doValidation;}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9qYWNrZWQtYWp2LmpzIl0sIm5hbWVzIjpbInZhbGlkYXRvciIsImFqdiIsImFsbEVycm9ycyIsInRyYW5zZm9ybUVycm9yIiwiZXJyb3IiLCJrZXl3b3JkIiwicGF0aCIsInBhcmFtcyIsIm1pc3NpbmdQcm9wZXJ0eSIsIm1lc3NhZ2UiLCJkYXRhUGF0aCIsInN1YnN0ciIsInNjaGVtYVRvU2FtcGxlIiwic2NoZW1hIiwidHlwZSIsInByb3BlcnRpZXMiLCJ2YWwiLCJpdGVtcyIsImxlbmd0aCIsIm1hcCIsImkiLCJ2YWxpZGF0ZSIsImNvbXBpbGUiLCJzdHJ1Y3R1cmUiLCJkb1ZhbGlkYXRpb24iLCJ2YWx1ZSIsInZhbGlkIiwiZXJyb3JzIiwiZ2V0U3RydWN0dXJlIl0sIm1hcHBpbmdzIjoiaUVBK0JnQkEsUyxDQUFBQSxTLENBL0JoQix3Qix1Q0FDQSw4QixtRkFDQSxHQUFNQyxLQUFNLGtCQUFRLENBQ2hCQyxVQUFVLElBRE0sQ0FBUixDQUFaLENBSUEsUUFBU0MsZUFBVCxDQUF3QkMsS0FBeEIsQ0FBOEIsQ0FDMUIsR0FBSUEsTUFBTUMsT0FBTixFQUFpQixVQUFyQixDQUFnQyxDQUM1QixNQUFPLENBQ0hDLEtBQU1GLE1BQU1HLE1BQU4sQ0FBYUMsZUFEaEIsQ0FFSEMsUUFBU0wsTUFBTUssT0FGWixDQUFQLENBSUgsQ0FDRCxNQUFPLENBQ0hBLFFBQVFMLE1BQU1LLE9BRFgsQ0FFSEgsS0FBS0YsTUFBTU0sUUFBTixDQUFlQyxNQUFmLENBQXNCLENBQXRCLENBRkYsQ0FBUCxDQUlILENBQ0QsUUFBU0MsZUFBVCxDQUF3QkMsTUFBeEIsQ0FBK0IsQ0FDM0IsT0FBT0EsT0FBT0MsSUFBZCxFQUNJLElBQUssUUFBTCxDQUNJLE1BQU8sc0JBQVVELE9BQU9FLFVBQWpCLENBQTRCLG9CQUFLSCxnQkFBZUksR0FBZixDQUFMLEVBQTVCLENBQVAsQ0FDSixJQUFLLE9BQUwsQ0FDSSxHQUFJSCxPQUFPSSxLQUFQLEVBQWdCSixPQUFPSSxLQUFQLENBQWFDLE1BQWIsQ0FBc0IsQ0FBMUMsQ0FBNEMsQ0FDeEMsTUFBT0wsUUFBT0ksS0FBUCxDQUFhRSxHQUFiLENBQWlCLGtCQUFHUCxnQkFBZVEsQ0FBZixDQUFILEVBQWpCLENBQVAsQ0FDSCxDQUNELE1BQU8sRUFBUCxDQUNKLFFBQ0ksTUFBT1AsUUFBT0MsSUFBZCxDQVRSLENBV0gsQ0FDTSxRQUFTZCxVQUFULENBQW1CYSxNQUFuQixDQUEwQixDQUM3QixHQUFNUSxVQUFXcEIsSUFBSXFCLE9BQUosQ0FBWVQsTUFBWixDQUFqQixDQUNBLEdBQU1VLFdBQVlYLGVBQWVDLE1BQWYsQ0FBbEIsQ0FBeUMsQ0FDekMsUUFBU1csYUFBVCxDQUFzQkMsS0FBdEIsQ0FBNEIsQ0FDeEIsR0FBTUMsT0FBUUwsU0FBU0ksS0FBVCxDQUFkLENBQ0EsTUFBT0MsT0FBTyxFQUFQLENBQVlMLFNBQVNNLE1BQVQsQ0FBZ0JSLEdBQWhCLENBQW9CaEIsY0FBcEIsQ0FBbkIsQ0FDSCxDQUNEcUIsYUFBYUksWUFBYixDQUE0QixVQUFVLENBQ2xDLE1BQU9MLFVBQVAsQ0FDSCxDQUZELENBR0EsTUFBT0MsYUFBUCxDQUNIIiwiZmlsZSI6ImphY2tlZC1hanYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQWp2IGZyb20gJ2Fqdic7XHJcbmltcG9ydCB7bWFwVmFsdWVzfSBmcm9tICdsb2Rhc2gnO1xyXG5jb25zdCBhanYgPSBuZXcgQWp2KHtcclxuICAgIGFsbEVycm9yczp0cnVlXHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gdHJhbnNmb3JtRXJyb3IoZXJyb3Ipe1xyXG4gICAgaWYgKGVycm9yLmtleXdvcmQgPT0gXCJyZXF1aXJlZFwiKXtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwYXRoOiBlcnJvci5wYXJhbXMubWlzc2luZ1Byb3BlcnR5LFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBtZXNzYWdlOmVycm9yLm1lc3NhZ2UsXHJcbiAgICAgICAgcGF0aDplcnJvci5kYXRhUGF0aC5zdWJzdHIoMSlcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzY2hlbWFUb1NhbXBsZShzY2hlbWEpe1xyXG4gICAgc3dpdGNoKHNjaGVtYS50eXBlKXtcclxuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XHJcbiAgICAgICAgICAgIHJldHVybiBtYXBWYWx1ZXMoc2NoZW1hLnByb3BlcnRpZXMsdmFsPT5zY2hlbWFUb1NhbXBsZSh2YWwpKTtcclxuICAgICAgICBjYXNlIFwiYXJyYXlcIjpcclxuICAgICAgICAgICAgaWYgKHNjaGVtYS5pdGVtcyAmJiBzY2hlbWEuaXRlbXMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NoZW1hLml0ZW1zLm1hcChpPT5zY2hlbWFUb1NhbXBsZShpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBzY2hlbWEudHlwZTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdG9yKHNjaGVtYSl7XHJcbiAgICBjb25zdCB2YWxpZGF0ZSA9IGFqdi5jb21waWxlKHNjaGVtYSk7XHJcbiAgICBjb25zdCBzdHJ1Y3R1cmUgPSBzY2hlbWFUb1NhbXBsZShzY2hlbWEpOztcclxuICAgIGZ1bmN0aW9uIGRvVmFsaWRhdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgY29uc3QgdmFsaWQgPSB2YWxpZGF0ZSh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHZhbGlkPyBbXSA6IHZhbGlkYXRlLmVycm9ycy5tYXAodHJhbnNmb3JtRXJyb3IpO1xyXG4gICAgfVxyXG4gICAgZG9WYWxpZGF0aW9uLmdldFN0cnVjdHVyZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIHN0cnVjdHVyZTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZG9WYWxpZGF0aW9uO1xyXG59XHJcbiJdfQ==